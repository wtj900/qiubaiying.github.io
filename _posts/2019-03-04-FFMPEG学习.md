---
layout:     post
title:      IOS底层探索
subtitle:   底层探索
date:       2018-10-24
author:     JT
header-img: img/post-bg-github-cup.jpg
catalog:    true
tags:
    - iOS
---


## H.264和H.265

H264压缩技术主要采用了以下几种方法对视频数据进行压缩。包括：

* 帧内预测压缩，解决的是空域数据冗余问题。
* 帧间预测压缩（运动估计与补偿），解决的是时域数据冗徐问题。
* 整数离散余弦变换（DCT），将空间上的相关性变为频域上无关的数据然后进行量化。
* CABAC压缩。

经过压缩后的帧分为：I帧，P帧和B帧:

* I帧：关键帧，采用帧内压缩技术。
* P帧：向前参考帧，在压缩时，只参考前面已经处理的帧。采用帧间压缩技术。
* B帧：双向参考帧，在压缩时，它即参考前而的帧，又参考它后面的帧。采用帧间压缩技术。

除了I/P/B帧外，还有图像序列GOP。

GOP:两个I帧之间是一个图像序列，在一个图像序列中只有一个I帧。如下图所示：

![](https://wtj900.github.io/img/ffmpeg/GOP.png)

## YUV

YUV不能直接在opengles中显示，需要转化为RGB

![](https://wtj900.github.io/img/ffmpeg/格式文件.png)

![](https://wtj900.github.io/img/ffmpeg/解码头文件.png)

![](https://wtj900.github.io/img/ffmpeg/解码文件实现-1.png)

![](https://wtj900.github.io/img/ffmpeg/解码文件实现-2.png)

![](https://wtj900.github.io/img/ffmpeg/解码文件实现-3.png)

![](https://wtj900.github.io/img/ffmpeg/解码文件实现-4.png)

![](https://wtj900.github.io/img/ffmpeg/解码文件实现-5.png)

![](https://wtj900.github.io/img/ffmpeg/解码实现.png)

![](https://wtj900.github.io/img/ffmpeg/音频编解码过程.png)




















